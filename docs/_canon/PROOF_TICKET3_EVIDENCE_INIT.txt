[TICKET-3] PROOF: evidence:init (PowerShell)

Run ID: 20260210-T3
Task ID: T-003
Workspace: C:\Users\TECH\Desktop\oh-my-ag-src
Target path: .serena/evidence/20260210-T3/T-003/

DoD-1: --dry-run creates nothing and exits 0
Command:
  npx -y tsx cli/cli.ts evidence:init 20260210-T3 T-003 --dry-run; echo "EXIT:$LASTEXITCODE"
Output (excerpt):
  Target: C:\Users\TECH\Desktop\oh-my-ag-src\.serena\evidence\20260210-T3\T-003
  Would create:
    + evidence_pack.yaml
    + verification_report.md
    + execution_log.txt
    + approvals.json
  EXIT:0

DoD-2: initial create succeeds and exits 0
Command:
  npx -y tsx cli/cli.ts evidence:init 20260210-T3 T-003; echo "EXIT:$LASTEXITCODE"
Output (excerpt):
  Target: C:\Users\TECH\Desktop\oh-my-ag-src\.serena\evidence\20260210-T3\T-003
  Created:
    + evidence_pack.yaml
    + verification_report.md
    + execution_log.txt
    + approvals.json
  EXIT:0

DoD-3: conflict without --force exits 1
Command:
  npx -y tsx cli/cli.ts evidence:init 20260210-T3 T-003; echo "EXIT:$LASTEXITCODE"
Output (excerpt):
  Evidence directory already exists: C:\Users\TECH\Desktop\oh-my-ag-src\.serena\evidence\20260210-T3\T-003
  Use --force to overwrite.
  EXIT:1

DoD-4: --force overwrites and exits 0
Command:
  npx -y tsx cli/cli.ts evidence:init 20260210-T3 T-003 --force; echo "EXIT:$LASTEXITCODE"
Output (excerpt):
  Target: C:\Users\TECH\Desktop\oh-my-ag-src\.serena\evidence\20260210-T3\T-003
  Created:
    + evidence_pack.yaml
    + verification_report.md
    + execution_log.txt
    + approvals.json
  EXIT:0

[TICKET-2 Gate] verify pm (PowerShell, --json)
Command:
  npx -y tsx cli/cli.ts verify pm --workspace "C:\Users\TECH\Desktop\oh-my-ag-src" --json
  echo "EXIT:$LASTEXITCODE"
Output (excerpt):
  "ok": true
  "Evidence Path": pass (.serena/evidence/20260210-T3/T-003/)
  "Evidence Files": pass (3/3 present)
  "Evidence Schema": pass (All required keys present)
  "Evidence Approvals": pass (Approval chain valid)
  EXIT:0

Evidence dir listing (for strength):
Command:
  Get-ChildItem ".serena\evidence\20260210-T3\T-003" | Select-Object Name,Length
Output:
  approvals.json             58
  evidence_pack.yaml        160
  execution_log.txt          69
  verification_report.md     86

[INCIDENT-T3-SCOPE] agent.ts 오염 원인 규명 & 복구

[A1] status (요약)
  git status --porcelain
  -> M  cli/commands/agent.ts (비의도 수정 표시)

[A2] worktree diff for agent.ts (요약)
  git diff -- cli/commands/agent.ts
  -> 실제 코드 변경: readCliConfig/resolveVendor에 export 추가, cwdOverride 추가,
     console.error DEBUG 로그 다수 삽입 (공백/개행만의 변화 아님)

[A3] file timestamps (agent.ts)
  Get-Item .\cli\commands\agent.ts | Select-Object FullName,Length,LastWriteTime
  -> LastWriteTime: 2026-02-10 오후 2:11:41, Length: 20708

[A4] committed history
  git log -n 5 --oneline -- cli/commands/agent.ts
  -> 5609032 feat: split cli/web workspaces and docs release flow

[원인 분류] 케이스 2) 포매터/린터/IDE 저장 또는 수동 디버그 삽입
  근거:
  - diff에 DEBUG console.error 및 export/cwdOverride 등 의미 있는 코드 변경 존재
  - word-diff에서도 공백/개행 위주의 변화 아님
  - core.autocrlf=true이나 CRLF/공백-only 변화와 무관

[복구 조치]
  C1) git restore -- cli/commands/agent.ts
  C2) git status --porcelain / git diff --name-only --cached
      -> agent.ts 제거, staged는 TICKET-3 3파일만 유지

[재발 방지 기록 (케이스2 대응)]
  - 디버그/포매팅은 별도 브랜치 또는 임시 파일에서 수행
  - IDE autosave/formatOnSave가 켜져 있다면 TICKET-4에서 제외/설정 분리(이번 스코프 유지)
